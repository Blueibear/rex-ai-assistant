# Rex AI Assistant - Top-level dependencies
# Edit this file, then run: pip-compile requirements.in
# To install: pip-sync requirements.txt

# ðŸŒ Core Web & API
flask>=3.1.0,<4.0.0
flask-cors>=5.0.0,<6.0.0  # Updated for CVE fixes
flask-limiter>=3.5.0,<4.0.0
requests>=2.32.0,<3.0.0

# ðŸ”Š Audio Input/Output
sounddevice>=0.4.6,<1.0.0
soundfile>=0.12.0,<1.0.0

# ðŸ§  AI / ML Models (CPU-only by default)
# torch 2.7.1+ fixes DoS vulnerabilities (GHSA-3749-ghw9-m3mg, GHSA-887c-mr87-cxwp)
# For CPU-only install: pip install -r requirements.txt --extra-index-url https://download.pytorch.org/whl/cpu
torch>=2.7.1,<3.0.0
torchvision>=0.20.1,<0.21.0
torchaudio>=2.5.1,<2.6.0
# transformers 4.48+ required for CVE-2024-XXXX deserialization fix
# Note: BeamSearchScorer compatibility shim in rex/compat/transformers_shims.py
transformers>=4.48.0,<5.0.0
TTS>=0.18.0,<1.0.0
openai>=1.3.0,<2.0.0
ollama>=0.4.0,<1.0.0
openai-whisper>=20231117
openwakeword>=0.6.0,<1.0.0
numpy>=1.24.0,<2.0.0

# ðŸ§ª Testing & Environment
pytest>=8.0.0,<9.0.0
python-dotenv>=1.0.1,<2.0.0

# ðŸ•¸ï¸ Web Scraping
beautifulsoup4>=4.12.0,<5.0.0

# ðŸ“ Configuration / Validation
pydantic>=2.0.0,<3.0.0

# ðŸ”’ Security-Critical Dependencies
cryptography>=43.0.1
setuptools>=78.1.1
pip>=25.3
werkzeug>=3.0.0
jinja2>=3.1.3
pillow>=10.3.0
urllib3>=2.0.0
certifi>=2024.2.2

# ðŸ“¡ MQTT Messaging
asyncio-mqtt>=0.16.0
