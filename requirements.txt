# Rex AI Assistant - Pinned Dependencies
# This file contains exact version pins for reproducible builds and Dependabot updates
# To update: Edit version numbers, test thoroughly, then commit
# Last updated: 2026-01-08

# ğŸŒ Core Web & API
flask==3.1.0                   # Upgraded for security fixes
flask-cors==5.0.0              # CVE fixes for CORS vulnerabilities
flask-limiter==3.8.0
requests==2.32.3               # CVE-2024-35195 fixed

# ğŸ”Š Audio Input/Output
sounddevice==0.5.1
soundfile==0.12.1

# ğŸ§  AI / ML Models (CPU-only by default)
# For CPU builds: pip install -r requirements.txt --extra-index-url https://download.pytorch.org/whl/cpu
# torch 2.9.1 includes all security fixes for DoS vulnerabilities
torch==2.9.1; sys_platform != "win32"
torch==2.9.1; sys_platform == "win32"
torchvision==0.20.1
torchaudio==2.5.1

# transformers 4.57.3: Fixes CVE-2024-XXXX (Deserialization of Untrusted Data)
# Note: BeamSearchScorer moved internally in 4.38+. Compatibility shim in rex/compat/transformers_shims.py
transformers==4.57.3

# TTS and related
TTS==0.22.0                    # Compatible with transformers 4.57.3
openai==1.57.0
ollama==0.4.5
openai-whisper==20240930
openwakeword==0.6.0
numpy==1.26.4

# ğŸ§ª Testing & Environment
pytest==8.3.4
python-dotenv==1.0.1

# ğŸ•¸ï¸ Web Scraping
beautifulsoup4==4.12.3

# ğŸ“ Configuration / Validation
pydantic==2.10.5

# ğŸ”’ Security-Critical Dependencies
# These packages fix known CVEs
cryptography==44.0.0           # Multiple CVE fixes
setuptools==78.1.1             # PYSEC-2025-49 path traversal fix
pip==25.0.1                    # tarfile path traversal fix
werkzeug==3.1.3                # Flask dependency, CVE fixes
jinja2==3.1.5                  # Template injection fixes
pillow==11.1.0                 # Image processing CVEs
urllib3==2.3.0                 # Request dependency, CVE fixes
certifi==2024.12.14            # Certificate validation updates

# ğŸ“¡ MQTT Messaging
asyncio-mqtt==0.16.2
