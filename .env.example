# ================================
# Rex AI Assistant Configuration
# ================================
# Copy this file to .env and fill in your values
# Required variables are marked with (REQUIRED)
# Optional variables show their default values

# ================================
# Core Settings
# ================================

# Active user profile (maps to Memory/<user_key>/core.json)
REX_ACTIVE_USER=default

# Logging configuration
REX_LOG_LEVEL=INFO
REX_LOG_PATH=logs/rex.log
REX_ERROR_LOG_PATH=logs/error.log
REX_DEBUG_LOGGING=false

# Enable file logging (set to false to only log to stdout)
REX_FILE_LOGGING_ENABLED=true

# ================================
# Wakeword Detection
# ================================

# Wakeword phrase (e.g., "rex", "jarvis", "computer")
REX_WAKEWORD=rex

# Alternative wakeword keyword for openwakeword engine
REX_WAKEWORD_KEYWORD=hey_jarvis

# Detection threshold (0.0-1.0, higher = more strict)
REX_WAKEWORD_THRESHOLD=0.5

# Wakeword detection window (seconds)
REX_WAKEWORD_WINDOW=1.0

# Polling interval for wakeword detection (seconds)
REX_WAKEWORD_POLL_INTERVAL=0.05

# Frame duration for detection (seconds)
REX_DETECTION_FRAME_SECONDS=0.5

# ================================
# Audio Configuration
# ================================

# Audio sample rate (Hz)
REX_SAMPLE_RATE=16000

# Command recording duration (seconds)
REX_COMMAND_DURATION=5.0
REX_CAPTURE_SECONDS=5.0

# Audio device indices (leave empty for default)
# List available devices with: python -c "import sounddevice; print(sounddevice.query_devices())"
REX_INPUT_DEVICE=
REX_OUTPUT_DEVICE=
REX_AUDIO_INPUT_DEVICE=
REX_AUDIO_OUTPUT_DEVICE=

# Wake acknowledgment sound path (optional)
REX_WAKE_SOUND=

# ================================
# Speech Recognition (Whisper)
# ================================

# Whisper model size: tiny, base, small, medium, large
# Larger models are more accurate but slower and use more memory
REX_WHISPER_MODEL=base
WHISPER_MODEL=base

# Device for Whisper: cpu, cuda
REX_WHISPER_DEVICE=cpu
WHISPER_DEVICE=cpu

# ================================
# Language Model (LLM)
# ================================

# LLM backend: transformers, openai
REX_LLM_BACKEND=transformers
REX_LLM_PROVIDER=transformers

# Model name or path
# For transformers: distilgpt2, gpt2, sshleifer/tiny-gpt2
# For OpenAI: gpt-3.5-turbo, gpt-4
REX_LLM_MODEL=distilgpt2

# LLM generation parameters
REX_LLM_TEMPERATURE=0.7
REX_LLM_MAX_TOKENS=120
REX_LLM_TOP_P=0.9
REX_LLM_TOP_K=50
REX_LLM_SEED=42

# ================================
# OpenAI API (if using OpenAI backend)
# ================================

# OpenAI API key (REQUIRED if REX_LLM_BACKEND=openai)
OPENAI_API_KEY=

# OpenAI model name
OPENAI_MODEL=gpt-3.5-turbo

# ================================
# Text-to-Speech (TTS)
# ================================

# TTS model name
REX_TTS_MODEL=tts_models/multilingual/multi-dataset/xtts_v2

# TTS language code (e.g., en, es, fr, de)
REX_SPEAK_LANGUAGE=en

# ================================
# Memory & Context
# ================================

# Maximum conversation history items to retain
REX_MEMORY_MAX_ITEMS=50
REX_MEMORY_MAX_TURNS=50

# Enable transcript saving
REX_TRANSCRIPTS_ENABLED=true

# Transcripts directory
REX_TRANSCRIPTS_DIR=transcripts

# Enable conversation export
REX_CONVERSATION_EXPORT=true

# ================================
# Web Search Plugins
# ================================

# Comma-separated list of search providers
REX_SEARCH_PROVIDERS=serpapi,brave,duckduckgo

# Brave Search API key (optional)
BRAVE_API_KEY=

# SerpAPI key (optional)
SERPAPI_KEY=

# ================================
# Flask API Security
# ================================

# API key for the speech synthesis API (REQUIRED for rex_speak_api.py)
REX_SPEAK_API_KEY=

# Allowed CORS origins (comma-separated URLs)
# Use "*" for wildcard (NOT RECOMMENDED in production)
REX_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5000,http://127.0.0.1:3000,http://127.0.0.1:5000

# Rate limiting configuration
REX_RATE_LIMIT=30/minute
REX_SPEAK_RATE_LIMIT=30
REX_SPEAK_RATE_WINDOW=60

# Maximum text length for TTS requests (characters)
REX_SPEAK_MAX_CHARS=800

# External rate limit storage URI (optional)
# Examples: memory://, redis://localhost:6379/0, memcached://localhost:11211
REX_SPEAK_STORAGE_URI=memory://
FLASK_LIMITER_STORAGE_URI=

# ================================
# Flask Proxy Security
# ================================

# Shared secret for proxy authentication (optional)
REX_PROXY_TOKEN=

# Allow local connections without token (1=true, 0=false)
REX_PROXY_ALLOW_LOCAL=0

# ================================
# Development & Testing
# ================================

# Enable testing mode
REX_TESTING=false

# Device for model inference: cpu, cuda
REX_DEVICE=cpu

# ================================
# Plugin Configuration
# ================================

# Plugin timeout (seconds)
REX_PLUGIN_TIMEOUT=30

# Plugin output size limit (bytes)
REX_PLUGIN_OUTPUT_LIMIT=1048576

# Plugin rate limit (requests per minute)
REX_PLUGIN_RATE_LIMIT=10
