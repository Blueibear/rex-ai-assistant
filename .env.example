# ================================
# Rex AI Assistant Configuration
# ================================
# Copy this file to .env and fill in your values
# Required variables are marked with (REQUIRED)
# Optional variables show their default values

# ================================
# Core Settings
# ================================

# Active user profile (maps to Memory/<user_key>/core.json)
REX_ACTIVE_USER=default

# Logging configuration
REX_LOG_LEVEL=INFO
REX_LOG_PATH=logs/rex.log
REX_ERROR_LOG_PATH=logs/error.log
REX_DEBUG_LOGGING=false

# Enable file logging (set to false to only log to stdout)
REX_FILE_LOGGING_ENABLED=true

# ================================
# Wakeword Detection
# ================================

# Wakeword phrase (e.g., "rex", "jarvis", "computer")
REX_WAKEWORD=rex

# Alternative wakeword keyword for openwakeword engine
REX_WAKEWORD_KEYWORD=hey_jarvis

# Wakeword backend: onnx, openwakeword
REX_WAKEWORD_BACKEND=onnx

# Detection threshold (0.0-1.0, higher = more strict)
REX_WAKEWORD_THRESHOLD=0.5

# Wakeword detection window (seconds)
REX_WAKEWORD_WINDOW=1.0

# Polling interval for wakeword detection (seconds)
REX_WAKEWORD_POLL_INTERVAL=0.05

# Frame duration for detection (seconds)
REX_DETECTION_FRAME_SECONDS=0.5

# ================================
# Audio Configuration
# ================================

# Audio sample rate (Hz)
REX_SAMPLE_RATE=16000

# Command recording duration (seconds)
REX_COMMAND_DURATION=5.0
REX_CAPTURE_SECONDS=5.0

# Audio device indices (leave empty for default)
# List available devices with: python audio_config.py --list
REX_INPUT_DEVICE=
REX_OUTPUT_DEVICE=
REX_AUDIO_INPUT_DEVICE=
REX_AUDIO_OUTPUT_DEVICE=

# Wake acknowledgment sound path (optional - leave empty to disable tone)
# Set to empty or comment out to disable the wake acknowledgment tone
REX_WAKE_SOUND=

# ================================
# Speech Recognition (Whisper)
# ================================

# Whisper model size: tiny, base, small, medium, large
# Larger models are more accurate but slower and use more memory
REX_WHISPER_MODEL=base
WHISPER_MODEL=base

# Device for Whisper: cpu, cuda
REX_WHISPER_DEVICE=cpu
WHISPER_DEVICE=cpu

# ================================
# Language Model (LLM)
# ================================

# LLM backend: transformers, openai, ollama
REX_LLM_BACKEND=transformers
REX_LLM_PROVIDER=transformers

# Model name or path
# For transformers: distilgpt2, gpt2, sshleifer/tiny-gpt2
# For OpenAI: gpt-3.5-turbo, gpt-4
# For Ollama: llama2, mistral, codellama
REX_LLM_MODEL=distilgpt2

# LLM generation parameters
REX_LLM_TEMPERATURE=0.7
REX_LLM_MAX_TOKENS=120
REX_LLM_TOP_P=0.9
REX_LLM_TOP_K=50
REX_LLM_SEED=42

# ================================
# OpenAI API (if using OpenAI backend)
# ================================

# OpenAI API key (REQUIRED if REX_LLM_BACKEND=openai)
OPENAI_API_KEY=

# OpenAI model name
OPENAI_MODEL=gpt-3.5-turbo

# OpenAI base URL (for custom endpoints, e.g., Azure OpenAI)
OPENAI_BASE_URL=

# ================================
# Ollama API (if using Ollama backend)
# ================================

# Ollama server host URL (default: http://127.0.0.1:11434)
# Make sure `ollama serve` is running before using this backend
OLLAMA_HOST=http://127.0.0.1:11434

# Ollama model name (default: llama3.1:8b)
# List available models with: ollama list
# Pull a model with: ollama pull <model-name>
REX_MODEL=llama3.1:8b

# Alternative: OLLAMA_BASE_URL (deprecated, use OLLAMA_HOST instead)
# OLLAMA_BASE_URL=http://localhost:11434

# Ollama API key (only needed for Ollama cloud, not local)
# OLLAMA_API_KEY=

# Use Ollama cloud instead of local server (default: false)
# OLLAMA_USE_CLOUD=false

# ================================
# Text-to-Speech (TTS)
# ================================

# TTS provider: xtts, edge, pyttsx3, piper
REX_TTS_PROVIDER=xtts

# TTS model name (for Coqui TTS)
REX_TTS_MODEL=tts_models/multilingual/multi-dataset/xtts_v2

# TTS voice name (for edge-tts)
# List available voices: python list_voices.py
REX_TTS_VOICE=en-US-AndrewNeural

# Piper model path (if using Piper TTS)
REX_PIPER_MODEL=voices/en_US-lessac-medium.onnx

# TTS language code (e.g., en, es, fr, de)
REX_SPEAK_LANGUAGE=en

# ================================
# Memory & Context
# ================================

# Maximum conversation history items to retain
REX_MEMORY_MAX_ITEMS=50
REX_MEMORY_MAX_TURNS=50

# Maximum memory file size in bytes
REX_MEMORY_MAX_BYTES=131072

# Enable transcript saving
REX_TRANSCRIPTS_ENABLED=true

# Transcripts directory
REX_TRANSCRIPTS_DIR=transcripts

# Enable conversation export
REX_CONVERSATION_EXPORT=true

# ================================
# Web Search Plugins
# ================================

# Comma-separated list of search providers
REX_SEARCH_PROVIDERS=serpapi,brave,duckduckgo

# SerpAPI key (optional)
# Get your key from: https://serpapi.com/
SERPAPI_KEY=

# SerpAPI search engine (google, bing, etc.)
SERPAPI_ENGINE=google

# Brave Search API key (optional)
# Get your key from: https://brave.com/search/api/
BRAVE_API_KEY=

# Google Custom Search API key and engine ID (optional)
# Get your credentials from: https://console.cloud.google.com/
GOOGLE_API_KEY=
GOOGLE_CSE_ID=

# Browserless API key (for web scraping, optional)
# Get your key from: https://www.browserless.io/
BROWSERLESS_API_KEY=

# ================================
# Flask API Security
# ================================

# API key for the speech synthesis API (REQUIRED for rex_speak_api.py)
REX_SPEAK_API_KEY=

# Allowed CORS origins (comma-separated URLs)
# Use "*" for wildcard (NOT RECOMMENDED in production)
REX_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5000,http://127.0.0.1:3000,http://127.0.0.1:5000

# Rate limiting configuration
REX_RATE_LIMIT=30/minute
REX_SPEAK_RATE_LIMIT=30
REX_SPEAK_RATE_WINDOW=60

# Maximum text length for TTS requests (characters)
REX_SPEAK_MAX_CHARS=800

# External rate limit storage URI (optional)
# Examples: memory://, redis://localhost:6379/0, memcached://localhost:11211
REX_SPEAK_STORAGE_URI=memory://
FLASK_LIMITER_STORAGE_URI=

# ================================
# Flask Proxy Security
# ================================

# Shared secret for proxy authentication (optional)
REX_PROXY_TOKEN=

# Allow local connections without token (1=true, 0=false)
REX_PROXY_ALLOW_LOCAL=0

# ================================
# Development & Testing
# ================================

# Enable testing mode
REX_TESTING=false

# Device for model inference: cpu, cuda
REX_DEVICE=cpu

# ================================
# Plugin Configuration
# ================================

# Plugin timeout (seconds)
REX_PLUGIN_TIMEOUT=30

# Plugin output size limit (bytes)
REX_PLUGIN_OUTPUT_LIMIT=1048576

# Plugin rate limit (requests per minute)
REX_PLUGIN_RATE_LIMIT=10

# ================================
# Home Assistant Integration (Optional)
# ================================

# Home Assistant base URL (e.g., http://homeassistant.local:8123)
# Leave empty to disable Home Assistant integration
HA_BASE_URL=

# Home Assistant long-lived access token
# Generate one from: http://homeassistant.local:8123/profile
# Required if HA_BASE_URL is set
HA_TOKEN=

# Shared secret for HA webhook authentication (optional)
HA_SECRET=

# Verify SSL certificates for HA connections (true/false)
HA_VERIFY_SSL=true

# Request timeout for HA API calls (seconds)
HA_TIMEOUT=10.0
